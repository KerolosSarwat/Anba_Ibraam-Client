{"ast":null,"code":"import _objectSpread from\"F:/Bishoy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Shirt,FileText,Edit,Trash2,Users}from'lucide-react';import{useNavigate}from'react-router-dom';import*as XLSX from'xlsx';import{calculateAge}from'../utils/nationalId';import{useLanguage}from'../contexts/LanguageContext';import{API_URL}from'../config/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Reports(){const{t}=useLanguage();const[clothingReport,setClothingReport]=useState([]);const[familyAidsReport,setFamilyAidsReport]=useState([]);const[visibleTab,setVisibleTab]=useState('CLOTHING');// CLOTHING, HISTORY, or FAMILY_AIDS\nuseEffect(()=>{if(visibleTab==='CLOTHING'){fetch(\"\".concat(API_URL,\"/api/reports/clothing\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(res=>res.json()).then(data=>{if(Array.isArray(data)){setClothingReport(data);}else{setClothingReport([]);console.error('API returned non-array:',data);}}).catch(err=>{console.error(err);setClothingReport([]);});}else if(visibleTab==='FAMILY_AIDS'){fetch(\"\".concat(API_URL,\"/api/reports/family-aids\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(res=>res.json()).then(data=>{if(Array.isArray(data)){setFamilyAidsReport(data);}else{setFamilyAidsReport([]);console.error('API returned non-array:',data);}}).catch(err=>{console.error(err);setFamilyAidsReport([]);});}},[visibleTab]);const exportClothing=()=>{const rows=[];clothingReport.forEach(f=>{f.members.forEach(m=>{rows.push({[t('thFamilyName')]:f.familyName,[t('thMember')]:m.name,[t('thRole')]:t(\"role\".concat(m.role))||m.role,[t('thSize')]:m.clothingSize,[t('memberSizeDetails')]:m.clothingDetails});});});const ws=XLSX.utils.json_to_sheet(rows);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Clothing\");XLSX.writeFile(wb,\"ClothingSheet.xlsx\");};const exportFamilyStatus=()=>{const rows=familyAidsReport.map(f=>{var _f$members;return{[t('thFamilyName')]:f.fullName,[t('lblPhoneShort')]:f.phone,[t('lblID')]:f.nationalId,[t('lblIncome')]:f.income,[t('lblTotalAid')]:(f.familyAids||[]).reduce((s,a)=>s+a.amount,0)+(f.members||[]).reduce((s,m)=>s+(m.individualAids||[]).reduce((ss,aa)=>ss+aa.amount,0),0),[t('lblMembersCount')]:((_f$members=f.members)===null||_f$members===void 0?void 0:_f$members.length)||0};});const ws=XLSX.utils.json_to_sheet(rows);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"FamilyStatus\");XLSX.writeFile(wb,\"FamilyStatus.xlsx\");};const exportMembers=()=>{const rows=familyAidsReport.flatMap(family=>{const head={[t('thFamilyName')]:family.fullName,[t('thMember')]:family.fullName,[t('thRole')]:t('roleHead')||'Head',[t('lblAge')]:calculateAge(family.nationalId),[t('lblID')]:family.nationalId,[t('lblPhoneShort')]:family.phone,[t('memberJob')]:family.job,[t('memberStatus')]:t('status'+family.socialStatus)||family.socialStatus};const members=(family.members||[]).map(m=>({[t('thFamilyName')]:family.fullName,[t('thMember')]:m.name,[t('thRole')]:t(\"role\".concat(m.role))||m.role,[t('lblAge')]:calculateAge(m.nationalId),[t('lblID')]:m.nationalId,[t('lblPhoneShort')]:'-',[t('memberJob')]:[m.job,m.educationLevel].filter(Boolean).join(' / '),[t('memberStatus')]:t('status'+m.socialStatus)||m.socialStatus}));return[head,...members];});const ws=XLSX.utils.json_to_sheet(rows);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Members\");XLSX.writeFile(wb,\"MembersDetails.xlsx\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:t('repTitle')}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-muted)'},children:t('repSubtitle')})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn \".concat(visibleTab==='CLOTHING'?'btn-primary':'btn-secondary'),style:{marginRight:'1rem',marginLeft:'1rem'}// Add margin for both directions\n,onClick:()=>setVisibleTab('CLOTHING'),children:[/*#__PURE__*/_jsx(Shirt,{size:18}),\" \",t('btnClothingSheet')]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn \".concat(visibleTab==='HISTORY'?'btn-primary':'btn-secondary'),onClick:()=>setVisibleTab('HISTORY'),children:[/*#__PURE__*/_jsx(FileText,{size:18}),\" \",t('btnAidHistory')]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn \".concat(visibleTab==='FAMILY_AIDS'?'btn-primary':'btn-secondary'),style:{marginLeft:'1rem'},onClick:()=>setVisibleTab('FAMILY_AIDS'),children:[/*#__PURE__*/_jsx(Users,{size:18}),\" \",t('btnFamilyStatus')||'Family Status']}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn \".concat(visibleTab==='MEMBERS'?'btn-primary':'btn-secondary'),style:{marginLeft:'1rem'},onClick:()=>{setVisibleTab('MEMBERS');// Similar to Family Aids, we need the data loaded.\n// Reuse the fetch logic from FAMILY_AIDS because it gets the same data structure\n// We can just trigger the fetch if empty or rely on the user having visited FAMILY_AIDS?\n// Better to duplicate the fetch trigger logic or consolidate\nif(familyAidsReport.length===0){fetch(\"\".concat(API_URL,\"/api/reports/family-aids\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(res=>res.json()).then(data=>Array.isArray(data)?setFamilyAidsReport(data):setFamilyAidsReport([])).catch(console.error);}},children:[/*#__PURE__*/_jsx(Users,{size:18}),\" \",t('btnMembersReport')||'Members']})]}),visibleTab==='CLOTHING'&&/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:t('btnClothingSheet')}),/*#__PURE__*/_jsx(\"button\",{onClick:exportClothing,className:\"btn btn-secondary\",children:t('btnExport')})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',textAlign:'inherit'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'2px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thFamilyName')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thMember')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thRole')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thSize')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0644\\u0628\\u0633\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:clothingReport.map((family,fIdx)=>/*#__PURE__*/_jsx(React.Fragment,{children:family.members.map((member,mIdx)=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #f3f4f6'},children:[mIdx===0&&/*#__PURE__*/_jsx(\"td\",{rowSpan:family.members.length,style:{padding:'1rem',verticalAlign:'top',fontWeight:600,color:'var(--primary)'},children:family.familyName}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'1rem'},children:[member.name,calculateAge(member.nationalId)&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'0.85rem',color:'var(--text-muted)',display:'block'},children:[calculateAge(member.nationalId),\" \",t('years')]})]}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',color:'var(--text-muted)'},children:t(\"role\".concat(member.role))||member.role}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',fontWeight:600},children:/*#__PURE__*/_jsx(\"span\",{style:{background:'#eff6ff',color:'#1d4ed8',padding:'0.25rem 0.5rem',borderRadius:'4px',fontSize:'0.9rem'},children:member.clothingSize||'-'})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:member.clothingDetails})]},\"\".concat(fIdx,\"-\").concat(mIdx)))},fIdx))})]})})]}),visibleTab==='HISTORY'&&/*#__PURE__*/_jsx(\"div\",{className:\"glass-card\",children:/*#__PURE__*/_jsx(AidHistoryTable,{t:t})}),visibleTab==='FAMILY_AIDS'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{onClick:exportFamilyStatus,className:\"btn btn-secondary\",children:t('btnExport')})}),familyAidsReport.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"glass-card\",style:{textAlign:'center',padding:'2rem',color:'var(--text-muted)'},children:t('noFamiliesFound')}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:familyAidsReport.map(family=>/*#__PURE__*/_jsx(FamilyStatusCard,{family:family,t:t},family.id))})]}),visibleTab==='MEMBERS'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{onClick:exportMembers,className:\"btn btn-secondary\",children:t('btnExport')})}),familyAidsReport.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"glass-card\",style:{textAlign:'center',padding:'2rem',color:'var(--text-muted)'},children:t('noFamiliesFound')}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:familyAidsReport.map(family=>/*#__PURE__*/_jsx(FamilyMembersCard,{family:family,t:t},family.id))})]})]});}function FamilyMembersCard(_ref){let{family,t}=_ref;const[isHovered,setIsHovered]=useState(false);// Prepare members list including head\nconst head={id:family.id+'_head',name:family.fullName,role:'Head',nationalId:family.nationalId,phone:family.phone,job:family.job,socialStatus:family.socialStatus,isHead:true};const members=[head,...(family.members||[]).map(m=>_objectSpread(_objectSpread({},m),{},{isHead:false}))];return/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),style:{transition:'all 0.3s ease',cursor:'default',padding:'1.5rem',border:isHovered?'1px solid var(--primary)':'1px solid transparent'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,color:'var(--primary)'},children:family.fullName}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.9rem',color:'var(--text-muted)',marginTop:'0.25rem'},children:[t('lblMembersCount'),\": \",members.length]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:isHovered?'2000px':'0',opacity:isHovered?1:0,overflow:'hidden',transition:'all 0.4s ease-in-out',marginTop:isHovered?'1.5rem':'0'},children:[/*#__PURE__*/_jsx(\"hr\",{style:{border:'none',borderTop:'1px solid #e5e7eb',margin:'0 0 1.5rem 0'}}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',textAlign:'inherit',fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #e5e7eb',background:'#f9fafb'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem'},children:t('thMember')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem'},children:t('thRole')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem'},children:t('lblAge')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem'},children:t('lblID')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem'},children:t('lblPhoneShort')}),/*#__PURE__*/_jsxs(\"th\",{style:{padding:'0.75rem'},children:[t('memberJob'),\" / \",t('memberEducation')]}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.75rem'},children:t('memberStatus')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:members.map((item,idx)=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',fontWeight:item.isHead?600:400},children:item.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',color:'var(--text-muted)'},children:item.isHead?t('roleHead')||'Head':t(\"role\".concat(item.role))||item.role}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem'},children:calculateAge(item.nationalId)||'-'}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem',fontFamily:'monospace'},children:item.nationalId||'-'}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem'},children:item.phone||'-'}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'0.75rem'},children:[item.job?item.job:'',item.job&&item.educationLevel?' / ':'',item.educationLevel?item.educationLevel:'',!item.job&&!item.educationLevel?'-':'']}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.75rem'},children:item.socialStatus?t('status'+item.socialStatus)||item.socialStatus:'-'})]},item.id||idx))})]})})]})]});}function FamilyStatusCard(_ref2){var _family$members;let{family,t}=_ref2;const[isHovered,setIsHovered]=useState(false);const allAids=[...(family.familyAids||[]).map(a=>_objectSpread(_objectSpread({},a),{},{beneficiary:a.type==='INDIVIDUAL'?family.fullName:'Family'})),...(family.members||[]).flatMap(m=>(m.individualAids||[]).map(a=>_objectSpread(_objectSpread({},a),{},{beneficiary:m.name})))].sort((a,b)=>new Date(b.date)-new Date(a.date));const totalAid=allAids.reduce((sum,a)=>sum+(a.amount||0),0);return/*#__PURE__*/_jsxs(\"div\",{className:\"glass-card\",onMouseEnter:()=>setIsHovered(true),onMouseLeave:()=>setIsHovered(false),style:{transition:'all 0.3s ease',cursor:'default',padding:'1.5rem',border:isHovered?'1px solid var(--primary)':'1px solid transparent'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,color:'var(--primary)'},children:family.fullName}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.9rem',color:'var(--text-muted)',marginTop:'0.25rem'},children:[t('lblID'),\": \",family.nationalId]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'1.1rem',fontWeight:700,color:'var(--primary)'},children:[\"EGP \",totalAid]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color:'var(--text-muted)'},children:t('lblTotalAid')})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:isHovered?'2000px':'0',opacity:isHovered?1:0,overflow:'hidden',transition:'all 0.4s ease-in-out',marginTop:isHovered?'1.5rem':'0'},children:[/*#__PURE__*/_jsx(\"hr\",{style:{border:'none',borderTop:'1px solid #e5e7eb',margin:'0 0 1.5rem 0'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'1rem',marginBottom:'1.5rem',fontSize:'0.9rem',color:'var(--text-secondary)'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('lblPhoneShort'),\":\"]}),\" \",family.phone]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('lblIncome'),\":\"]}),\" EGP \",family.income]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('lblAge'),\":\"]}),\" \",calculateAge(family.nationalId)||'-',\" \",calculateAge(family.nationalId)?t('years'):'']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('lblMembersCount'),\":\"]}),\" \",((_family$members=family.members)===null||_family$members===void 0?void 0:_family$members.length)||0]}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('lblAddress'),\":\"]}),\" \",family.address]}),family.job&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('memberJob'),\":\"]}),\" \",family.job]}),family.socialStatus&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:600},children:[t('memberStatus'),\":\"]}),\" \",t('status'+family.socialStatus)||family.socialStatus]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'1rem',margin:'0 0 0.5rem 0'},children:t('btnAidHistory')}),allAids.length>0?/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',fontSize:'0.9rem',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f9fafb',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.5rem',textAlign:'left'},children:t('thDate')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.5rem',textAlign:'left'},children:t('thBeneficiary')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.5rem',textAlign:'left'},children:t('thType')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.5rem',textAlign:'left'},children:t('thDesc')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.5rem',textAlign:'right'},children:t('thAmount')})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allAids.map((aid,idx)=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.5rem'},children:new Date(aid.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.5rem'},children:aid.beneficiary}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.5rem'},children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.75rem',padding:'0.1rem 0.4rem',borderRadius:'4px',background:aid.type==='FAMILY'?'#fdf2f8':'#eff6ff',color:aid.type==='FAMILY'?'#be185d':'#1d4ed8'},children:t('type'+aid.type)||aid.type})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.5rem'},children:aid.description}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'0.5rem',textAlign:'right',fontWeight:600},children:[\"EGP \",aid.amount]})]},aid.id||idx))})]})}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'0.5rem',fontSize:'0.9rem',color:'var(--text-muted)',fontStyle:'italic'},children:t('msgNoAidHistory')})]})]})]});}function AidHistoryTable(_ref3){let{t}=_ref3;const[history,setHistory]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[startDate,setStartDate]=useState('');const[endDate,setEndDate]=useState('');const[filterMonth,setFilterMonth]=useState('');const[filterYear,setFilterYear]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();useEffect(()=>{setLoading(true);const params=new URLSearchParams({page,limit:10});// Use month/year filtering if set, otherwise use date range\nif(filterMonth&&filterYear){params.append('month',filterMonth);params.append('year',filterYear);}else{if(startDate)params.append('startDate',startDate);if(endDate)params.append('endDate',endDate);}fetch(\"\".concat(API_URL,\"/api/aid?\").concat(params.toString()),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(res=>res.json()).then(result=>{if(result.data&&Array.isArray(result.data)){setHistory(result.data);setTotalPages(result.meta.totalPages);}else{// Fallback for old API if needed, though we updated it\nsetHistory(Array.isArray(result)?result:[]);}}).catch(err=>{console.error(err);setHistory([]);}).finally(()=>setLoading(false));},[page,startDate,endDate,filterMonth,filterYear]);const handleDelete=async id=>{if(!window.confirm(t('confirmDelete')||'Are you sure?'))return;try{const res=await fetch(\"\".concat(API_URL,\"/api/aid/\").concat(id),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});if(res.ok){setHistory(history.filter(h=>h.id!==id));}else{alert(t('aidFail')||'Failed to delete');}}catch(err){console.error(err);alert(t('alertError'));}};const exportHistory=async()=>{try{const params=new URLSearchParams({limit:100000});// Fetch all\nif(startDate)params.append('startDate',startDate);if(endDate)params.append('endDate',endDate);const res=await fetch(\"\".concat(API_URL,\"/api/aid?\").concat(params.toString()),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const result=await res.json();const data=result.data||[];const rows=data.map(item=>{var _item$family,_item$member,_item$family2,_item$member2,_item$family3;return{[t('thDate')]:new Date(item.date).toLocaleDateString(),[t('thType')]:t('type'+item.type)||item.type,[t('thBeneficiary')]:item.type==='FAMILY'?(_item$family=item.family)===null||_item$family===void 0?void 0:_item$family.fullName:\"\".concat(((_item$member=item.member)===null||_item$member===void 0?void 0:_item$member.name)||((_item$family2=item.family)===null||_item$family2===void 0?void 0:_item$family2.fullName)||t('unknownFamily')).concat((_item$member2=item.member)!==null&&_item$member2!==void 0&&_item$member2.name&&(_item$family3=item.family)!==null&&_item$family3!==void 0&&_item$family3.fullName?\" (\".concat(item.family.fullName,\")\"):''),[t('thDesc')]:item.description,[t('thAmount')]:item.amount};});const ws=XLSX.utils.json_to_sheet(rows);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"History\");XLSX.writeFile(wb,\"AidHistory.xlsx\");}catch(e){console.error(e);alert(t('alertError'));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1rem',flexWrap:'wrap',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:t('btnAidHistory')}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportHistory,className:\"btn btn-secondary\",style:{marginRight:'1rem'},children:t('btnExport')}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'center',padding:'0.5rem',background:'var(--glass-bg)',borderRadius:'8px',border:'1px solid var(--border-color)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.75rem',color:'var(--text-muted)',marginBottom:'0.25rem'},children:t('lblMonth')||'Month'}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-input\",style:{padding:'0.25rem',fontSize:'0.9rem',minWidth:'100px'},value:filterMonth,onChange:e=>{setFilterMonth(e.target.value);setStartDate('');setEndDate('');setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:t('optAll')||'All'}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:t('monthJan')||'January'}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:t('monthFeb')||'February'}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:t('monthMar')||'March'}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:t('monthApr')||'April'}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:t('monthMay')||'May'}),/*#__PURE__*/_jsx(\"option\",{value:\"6\",children:t('monthJun')||'June'}),/*#__PURE__*/_jsx(\"option\",{value:\"7\",children:t('monthJul')||'July'}),/*#__PURE__*/_jsx(\"option\",{value:\"8\",children:t('monthAug')||'August'}),/*#__PURE__*/_jsx(\"option\",{value:\"9\",children:t('monthSep')||'September'}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:t('monthOct')||'October'}),/*#__PURE__*/_jsx(\"option\",{value:\"11\",children:t('monthNov')||'November'}),/*#__PURE__*/_jsx(\"option\",{value:\"12\",children:t('monthDec')||'December'})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.75rem',color:'var(--text-muted)',marginBottom:'0.25rem'},children:t('lblYear')||'Year'}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-input\",style:{padding:'0.25rem',fontSize:'0.9rem',minWidth:'80px'},value:filterYear,onChange:e=>{setFilterYear(e.target.value);setStartDate('');setEndDate('');setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:t('optAll')||'All'}),/*#__PURE__*/_jsx(\"option\",{value:\"2024\",children:\"2024\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2025\",children:\"2025\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2026\",children:\"2026\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2027\",children:\"2027\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2028\",children:\"2028\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.8rem',color:'var(--text-muted)'},children:t('lblFromDate')}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-input\",style:{padding:'0.25rem',fontSize:'0.9rem'},value:startDate,onChange:e=>{setStartDate(e.target.value);setFilterMonth('');setFilterYear('');setPage(1);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.8rem',color:'var(--text-muted)'},children:t('lblToDate')}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-input\",style:{padding:'0.25rem',fontSize:'0.9rem'},value:endDate,onChange:e=>{setEndDate(e.target.value);setFilterMonth('');setFilterYear('');setPage(1);}})]})]})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{style:{padding:'2rem',textAlign:'center',color:'var(--text-muted)'},children:t('loading')}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',textAlign:'inherit'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'2px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thDate')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thType')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('lblRecurrenceType')||'Recurrence'}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thBeneficiary')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thDesc')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('thAmount')}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:t('actions')||'Actions'})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[history.map(item=>{var _item$family4,_item$member3,_item$family5,_item$member4,_item$family6;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #f3f4f6'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:new Date(item.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'0.25rem 0.5rem',borderRadius:'4px',background:item.type==='FAMILY'?'#fdf2f8':'#eff6ff',color:item.type==='FAMILY'?'#be185d':'#1d4ed8',fontSize:'0.85rem',fontWeight:600},children:t('type'+item.type)||item.type})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'0.25rem 0.5rem',borderRadius:'4px',background:item.recurrenceType==='MONTHLY'?'#ecfdf5':item.recurrenceType==='YEARLY'?'#fef3c7':'#f3f4f6',color:item.recurrenceType==='MONTHLY'?'#047857':item.recurrenceType==='YEARLY'?'#d97706':'#6b7280',fontSize:'0.75rem',fontWeight:600},children:item.recurrenceType==='MONTHLY'?t('recurrenceMonthly')||'Monthly':item.recurrenceType==='YEARLY'?t('recurrenceYearly')||'Yearly':t('recurrenceCustom')||'One-time'})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:item.type==='FAMILY'?(_item$family4=item.family)===null||_item$family4===void 0?void 0:_item$family4.fullName:\"\".concat(((_item$member3=item.member)===null||_item$member3===void 0?void 0:_item$member3.name)||((_item$family5=item.family)===null||_item$family5===void 0?void 0:_item$family5.fullName)||t('unknownFamily')).concat((_item$member4=item.member)!==null&&_item$member4!==void 0&&_item$member4.name&&(_item$family6=item.family)!==null&&_item$family6!==void 0&&_item$family6.fullName?\" (\".concat(item.family.fullName,\")\"):'')}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:item.description}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'1rem',fontWeight:600},children:[\"EGP \",item.amount]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'1rem',display:'flex',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/aid-management',{state:{aidToEdit:item}}),className:\"btn btn-secondary\",style:{padding:'0.25rem 0.5rem',fontSize:'0.8rem'},title:t('lblEdit'),children:/*#__PURE__*/_jsx(Edit,{size:14})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item.id),className:\"btn btn-secondary\",style:{padding:'0.25rem 0.5rem',fontSize:'0.8rem',color:'#ef4444',borderColor:'#fee2e2',background:'#fef2f2'},title:t('delete'),children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},item.id);}),history.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",style:{padding:'2rem',textAlign:'center',color:'var(--text-muted)'},children:t('noRecords')})})]})]}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',gap:'1rem',marginTop:'1.5rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setPage(p=>Math.max(1,p-1)),disabled:page===1,children:t('btnPrev')}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'var(--text-secondary)'},children:[t('lblPage'),\" \",page,\" / \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setPage(p=>Math.min(totalPages,p+1)),disabled:page===totalPages,children:t('btnNext')})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Shirt","FileText","Edit","Trash2","Users","useNavigate","XLSX","calculateAge","useLanguage","API_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Reports","t","clothingReport","setClothingReport","familyAidsReport","setFamilyAidsReport","visibleTab","setVisibleTab","fetch","concat","headers","localStorage","getItem","then","res","json","data","Array","isArray","console","error","catch","err","exportClothing","rows","forEach","f","members","m","push","familyName","name","role","clothingSize","clothingDetails","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","exportFamilyStatus","map","_f$members","fullName","phone","nationalId","income","familyAids","reduce","s","a","amount","individualAids","ss","aa","length","exportMembers","flatMap","family","head","job","socialStatus","educationLevel","filter","Boolean","join","children","className","style","color","marginBottom","marginRight","marginLeft","onClick","size","display","justifyContent","alignItems","marginTop","overflowX","width","borderCollapse","textAlign","borderBottom","padding","fIdx","member","mIdx","rowSpan","verticalAlign","fontWeight","fontSize","background","borderRadius","AidHistoryTable","flexDirection","gap","FamilyStatusCard","id","FamilyMembersCard","_ref","isHovered","setIsHovered","isHead","_objectSpread","onMouseEnter","onMouseLeave","transition","cursor","border","margin","maxHeight","opacity","overflow","borderTop","item","idx","fontFamily","_ref2","_family$members","allAids","beneficiary","type","sort","b","Date","date","totalAid","sum","gridTemplateColumns","gridColumn","address","aid","toLocaleDateString","description","fontStyle","_ref3","history","setHistory","page","setPage","totalPages","setTotalPages","startDate","setStartDate","endDate","setEndDate","filterMonth","setFilterMonth","filterYear","setFilterYear","loading","setLoading","navigate","params","URLSearchParams","limit","append","toString","result","meta","finally","handleDelete","window","confirm","method","ok","h","alert","exportHistory","_item$family","_item$member","_item$family2","_item$member2","_item$family3","e","flexWrap","minWidth","value","onChange","target","_item$family4","_item$member3","_item$family5","_item$member4","_item$family6","recurrenceType","state","aidToEdit","title","borderColor","colSpan","p","Math","max","disabled","min"],"sources":["F:/Bishoy/client/src/pages/Reports.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Shirt, FileText, Edit, Trash2, Users } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport * as XLSX from 'xlsx';\r\nimport { calculateAge } from '../utils/nationalId';\r\nimport { useLanguage } from '../contexts/LanguageContext';\r\nimport { API_URL } from '../config/api';\r\n\r\nexport default function Reports() {\r\n  const { t } = useLanguage();\r\n  const [clothingReport, setClothingReport] = useState([]);\r\n  const [familyAidsReport, setFamilyAidsReport] = useState([]);\r\n  const [visibleTab, setVisibleTab] = useState('CLOTHING'); // CLOTHING, HISTORY, or FAMILY_AIDS\r\n\r\n  useEffect(() => {\r\n    if (visibleTab === 'CLOTHING') {\r\n      fetch(`${API_URL}/api/reports/clothing`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          if (Array.isArray(data)) {\r\n            setClothingReport(data);\r\n          } else {\r\n            setClothingReport([]);\r\n            console.error('API returned non-array:', data);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          setClothingReport([]);\r\n        });\r\n    } else if (visibleTab === 'FAMILY_AIDS') {\r\n      fetch(`${API_URL}/api/reports/family-aids`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          if (Array.isArray(data)) {\r\n            setFamilyAidsReport(data);\r\n          } else {\r\n            setFamilyAidsReport([]);\r\n            console.error('API returned non-array:', data);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          setFamilyAidsReport([]);\r\n        });\r\n    }\r\n  }, [visibleTab]);\r\n\r\n  const exportClothing = () => {\r\n    const rows = [];\r\n    clothingReport.forEach(f => {\r\n      f.members.forEach(m => {\r\n        rows.push({\r\n          [t('thFamilyName')]: f.familyName,\r\n          [t('thMember')]: m.name,\r\n          [t('thRole')]: t(`role${m.role}`) || m.role,\r\n          [t('thSize')]: m.clothingSize,\r\n          [t('memberSizeDetails')]: m.clothingDetails\r\n        });\r\n      });\r\n    });\r\n    const ws = XLSX.utils.json_to_sheet(rows);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Clothing\");\r\n    XLSX.writeFile(wb, \"ClothingSheet.xlsx\");\r\n  };\r\n\r\n  const exportFamilyStatus = () => {\r\n    const rows = familyAidsReport.map(f => ({\r\n      [t('thFamilyName')]: f.fullName,\r\n      [t('lblPhoneShort')]: f.phone,\r\n      [t('lblID')]: f.nationalId,\r\n      [t('lblIncome')]: f.income,\r\n      [t('lblTotalAid')]: ((f.familyAids || []).reduce((s, a) => s + a.amount, 0) + (f.members || []).reduce((s, m) => s + (m.individualAids || []).reduce((ss, aa) => ss + aa.amount, 0), 0)),\r\n      [t('lblMembersCount')]: f.members?.length || 0\r\n    }));\r\n    const ws = XLSX.utils.json_to_sheet(rows);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"FamilyStatus\");\r\n    XLSX.writeFile(wb, \"FamilyStatus.xlsx\");\r\n  };\r\n\r\n  const exportMembers = () => {\r\n    const rows = familyAidsReport.flatMap(family => {\r\n      const head = {\r\n        [t('thFamilyName')]: family.fullName,\r\n        [t('thMember')]: family.fullName,\r\n        [t('thRole')]: t('roleHead') || 'Head',\r\n        [t('lblAge')]: calculateAge(family.nationalId),\r\n        [t('lblID')]: family.nationalId,\r\n        [t('lblPhoneShort')]: family.phone,\r\n        [t('memberJob')]: family.job,\r\n        [t('memberStatus')]: t('status' + family.socialStatus) || family.socialStatus\r\n      };\r\n      const members = (family.members || []).map(m => ({\r\n        [t('thFamilyName')]: family.fullName,\r\n        [t('thMember')]: m.name,\r\n        [t('thRole')]: t(`role${m.role}`) || m.role,\r\n        [t('lblAge')]: calculateAge(m.nationalId),\r\n        [t('lblID')]: m.nationalId,\r\n        [t('lblPhoneShort')]: '-',\r\n        [t('memberJob')]: [m.job, m.educationLevel].filter(Boolean).join(' / '),\r\n        [t('memberStatus')]: t('status' + m.socialStatus) || m.socialStatus\r\n      }));\r\n      return [head, ...members];\r\n    });\r\n\r\n    const ws = XLSX.utils.json_to_sheet(rows);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Members\");\r\n    XLSX.writeFile(wb, \"MembersDetails.xlsx\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"page-header\">\r\n        <h1 className=\"page-title\">{t('repTitle')}</h1>\r\n        <p style={{ color: 'var(--text-muted)' }}>{t('repSubtitle')}</p>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <button\r\n          className={`btn ${visibleTab === 'CLOTHING' ? 'btn-primary' : 'btn-secondary'}`}\r\n          style={{ marginRight: '1rem', marginLeft: '1rem' }} // Add margin for both directions\r\n          onClick={() => setVisibleTab('CLOTHING')}\r\n        >\r\n          <Shirt size={18} /> {t('btnClothingSheet')}\r\n        </button>\r\n        <button\r\n          className={`btn ${visibleTab === 'HISTORY' ? 'btn-primary' : 'btn-secondary'}`}\r\n          onClick={() => setVisibleTab('HISTORY')}\r\n        >\r\n          <FileText size={18} /> {t('btnAidHistory')}\r\n        </button>\r\n        <button\r\n          className={`btn ${visibleTab === 'FAMILY_AIDS' ? 'btn-primary' : 'btn-secondary'}`}\r\n          style={{ marginLeft: '1rem' }}\r\n          onClick={() => setVisibleTab('FAMILY_AIDS')}\r\n        >\r\n          <Users size={18} /> {t('btnFamilyStatus') || 'Family Status'}\r\n        </button>\r\n        <button\r\n          className={`btn ${visibleTab === 'MEMBERS' ? 'btn-primary' : 'btn-secondary'}`}\r\n          style={{ marginLeft: '1rem' }}\r\n          onClick={() => {\r\n            setVisibleTab('MEMBERS');\r\n            // Similar to Family Aids, we need the data loaded.\r\n            // Reuse the fetch logic from FAMILY_AIDS because it gets the same data structure\r\n            // We can just trigger the fetch if empty or rely on the user having visited FAMILY_AIDS?\r\n            // Better to duplicate the fetch trigger logic or consolidate\r\n            if (familyAidsReport.length === 0) {\r\n              fetch(`${API_URL}/api/reports/family-aids`, {\r\n                headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n              })\r\n                .then(res => res.json())\r\n                .then(data => Array.isArray(data) ? setFamilyAidsReport(data) : setFamilyAidsReport([]))\r\n                .catch(console.error);\r\n            }\r\n          }}\r\n        >\r\n          <Users size={18} /> {t('btnMembersReport') || 'Members'}\r\n        </button>\r\n      </div>\r\n\r\n      {visibleTab === 'CLOTHING' && (\r\n        <div className=\"glass-card\">\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <h3 style={{ marginTop: 0 }}>{t('btnClothingSheet')}</h3>\r\n            <button onClick={exportClothing} className=\"btn btn-secondary\">{t('btnExport')}</button>\r\n          </div>\r\n          <div style={{ overflowX: 'auto' }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse', textAlign: 'inherit' }}>\r\n              <thead>\r\n                <tr style={{ borderBottom: '2px solid #e5e7eb' }}>\r\n                  <th style={{ padding: '1rem' }}>{t('thFamilyName')}</th>\r\n                  <th style={{ padding: '1rem' }}>{t('thMember')}</th>\r\n                  <th style={{ padding: '1rem' }}>{t('thRole')}</th>\r\n                  <th style={{ padding: '1rem' }}>{t('thSize')}</th>\r\n                  <th style={{ padding: '1rem' }}>تفاصيل اللبس</th>\r\n\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {clothingReport.map((family, fIdx) => (\r\n                  <React.Fragment key={fIdx}>\r\n                    {family.members.map((member, mIdx) => (\r\n                      <tr key={`${fIdx}-${mIdx}`} style={{ borderBottom: '1px solid #f3f4f6' }}>\r\n                        {mIdx === 0 && (\r\n                          <td\r\n                            rowSpan={family.members.length}\r\n                            style={{ padding: '1rem', verticalAlign: 'top', fontWeight: 600, color: 'var(--primary)' }}\r\n                          >\r\n                            {family.familyName}\r\n                          </td>\r\n                        )}\r\n                        <td style={{ padding: '1rem' }}>\r\n                          {member.name}\r\n                          {calculateAge(member.nationalId) && <span style={{ fontSize: '0.85rem', color: 'var(--text-muted)', display: 'block' }}>{calculateAge(member.nationalId)} {t('years')}</span>}\r\n                        </td>\r\n                        <td style={{ padding: '1rem', color: 'var(--text-muted)' }}>{t(`role${member.role}`) || member.role}</td>\r\n                        <td style={{ padding: '1rem', fontWeight: 600 }}>\r\n                          <span style={{\r\n                            background: '#eff6ff',\r\n                            color: '#1d4ed8',\r\n                            padding: '0.25rem 0.5rem',\r\n                            borderRadius: '4px',\r\n                            fontSize: '0.9rem'\r\n                          }}>\r\n                            {member.clothingSize || '-'}\r\n                          </span>\r\n                        </td>\r\n                        <td style={{ padding: '1rem' }}>{member.clothingDetails}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </React.Fragment>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {visibleTab === 'HISTORY' && (\r\n        <div className=\"glass-card\">\r\n          <AidHistoryTable t={t} />\r\n        </div>\r\n      )}\r\n\r\n      {visibleTab === 'FAMILY_AIDS' && (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <button onClick={exportFamilyStatus} className=\"btn btn-secondary\">{t('btnExport')}</button>\r\n          </div>\r\n          {familyAidsReport.length === 0 && (\r\n            <div className=\"glass-card\" style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)' }}>\r\n              {t('noFamiliesFound')}\r\n            </div>\r\n          )}\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n            {familyAidsReport.map(family => (\r\n              <FamilyStatusCard key={family.id} family={family} t={t} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {visibleTab === 'MEMBERS' && (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <button onClick={exportMembers} className=\"btn btn-secondary\">{t('btnExport')}</button>\r\n          </div>\r\n          {familyAidsReport.length === 0 && (\r\n            <div className=\"glass-card\" style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)' }}>\r\n              {t('noFamiliesFound')}\r\n            </div>\r\n          )}\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n            {familyAidsReport.map(family => (\r\n              <FamilyMembersCard key={family.id} family={family} t={t} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction FamilyMembersCard({ family, t }) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  // Prepare members list including head\r\n  const head = {\r\n    id: family.id + '_head',\r\n    name: family.fullName,\r\n    role: 'Head',\r\n    nationalId: family.nationalId,\r\n    phone: family.phone,\r\n    job: family.job,\r\n    socialStatus: family.socialStatus,\r\n    isHead: true,\r\n  };\r\n\r\n  const members = [head, ...(family.members || []).map(m => ({ ...m, isHead: false }))];\r\n\r\n  return (\r\n    <div\r\n      className=\"glass-card\"\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      style={{\r\n        transition: 'all 0.3s ease',\r\n        cursor: 'default',\r\n        padding: '1.5rem',\r\n        border: isHovered ? '1px solid var(--primary)' : '1px solid transparent'\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div>\r\n          <h3 style={{ margin: 0, color: 'var(--primary)' }}>{family.fullName}</h3>\r\n          <div style={{ fontSize: '0.9rem', color: 'var(--text-muted)', marginTop: '0.25rem' }}>\r\n            {t('lblMembersCount')}: {members.length}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expandable Content */}\r\n      <div style={{\r\n        maxHeight: isHovered ? '2000px' : '0',\r\n        opacity: isHovered ? 1 : 0,\r\n        overflow: 'hidden',\r\n        transition: 'all 0.4s ease-in-out',\r\n        marginTop: isHovered ? '1.5rem' : '0'\r\n      }}>\r\n        <hr style={{ border: 'none', borderTop: '1px solid #e5e7eb', margin: '0 0 1.5rem 0' }} />\r\n\r\n        <div style={{ overflowX: 'auto' }}>\r\n          <table style={{ width: '100%', borderCollapse: 'collapse', textAlign: 'inherit', fontSize: '0.9rem' }}>\r\n            <thead>\r\n              <tr style={{ borderBottom: '1px solid #e5e7eb', background: '#f9fafb' }}>\r\n                <th style={{ padding: '0.75rem' }}>{t('thMember')}</th>\r\n                <th style={{ padding: '0.75rem' }}>{t('thRole')}</th>\r\n                <th style={{ padding: '0.75rem' }}>{t('lblAge')}</th>\r\n                <th style={{ padding: '0.75rem' }}>{t('lblID')}</th>\r\n                <th style={{ padding: '0.75rem' }}>{t('lblPhoneShort')}</th>\r\n                <th style={{ padding: '0.75rem' }}>{t('memberJob')} / {t('memberEducation')}</th>\r\n                <th style={{ padding: '0.75rem' }}>{t('memberStatus')}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {members.map((item, idx) => (\r\n                <tr key={item.id || idx} style={{ borderBottom: '1px solid #f3f4f6' }}>\r\n                  <td style={{ padding: '0.75rem', fontWeight: item.isHead ? 600 : 400 }}>{item.name}</td>\r\n                  <td style={{ padding: '0.75rem', color: 'var(--text-muted)' }}>{item.isHead ? (t('roleHead') || 'Head') : (t(`role${item.role}`) || item.role)}</td>\r\n                  <td style={{ padding: '0.75rem' }}>{calculateAge(item.nationalId) || '-'}</td>\r\n                  <td style={{ padding: '0.75rem', fontFamily: 'monospace' }}>{item.nationalId || '-'}</td>\r\n                  <td style={{ padding: '0.75rem' }}>{item.phone || '-'}</td>\r\n                  <td style={{ padding: '0.75rem' }}>\r\n                    {item.job ? item.job : ''}\r\n                    {item.job && item.educationLevel ? ' / ' : ''}\r\n                    {item.educationLevel ? item.educationLevel : ''}\r\n                    {!item.job && !item.educationLevel ? '-' : ''}\r\n                  </td>\r\n                  <td style={{ padding: '0.75rem' }}>\r\n                    {item.socialStatus ? (t('status' + item.socialStatus) || item.socialStatus) : '-'}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FamilyStatusCard({ family, t }) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  const allAids = [\r\n    ...(family.familyAids || []).map(a => ({ ...a, beneficiary: a.type === 'INDIVIDUAL' ? family.fullName : 'Family' })),\r\n    ...(family.members || []).flatMap(m => (m.individualAids || []).map(a => ({ ...a, beneficiary: m.name })))\r\n  ].sort((a, b) => new Date(b.date) - new Date(a.date));\r\n\r\n  const totalAid = allAids.reduce((sum, a) => sum + (a.amount || 0), 0);\r\n\r\n  return (\r\n    <div\r\n      className=\"glass-card\"\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      style={{\r\n        transition: 'all 0.3s ease',\r\n        cursor: 'default',\r\n        padding: '1.5rem',\r\n        border: isHovered ? '1px solid var(--primary)' : '1px solid transparent'\r\n      }}\r\n    >\r\n      {/* Header: Always Visible */}\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div>\r\n          <h3 style={{ margin: 0, color: 'var(--primary)' }}>{family.fullName}</h3>\r\n          <div style={{ fontSize: '0.9rem', color: 'var(--text-muted)', marginTop: '0.25rem' }}>\r\n            {t('lblID')}: {family.nationalId}\r\n          </div>\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <div style={{ fontSize: '1.1rem', fontWeight: 700, color: 'var(--primary)' }}>\r\n            EGP {totalAid}\r\n          </div>\r\n          <div style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{t('lblTotalAid')}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expandable Content */}\r\n      <div style={{\r\n        maxHeight: isHovered ? '2000px' : '0',\r\n        opacity: isHovered ? 1 : 0,\r\n        overflow: 'hidden',\r\n        transition: 'all 0.4s ease-in-out',\r\n        marginTop: isHovered ? '1.5rem' : '0'\r\n      }}>\r\n        <hr style={{ border: 'none', borderTop: '1px solid #e5e7eb', margin: '0 0 1.5rem 0' }} />\r\n\r\n        {/* Full Details Grid */}\r\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', marginBottom: '1.5rem', fontSize: '0.9rem', color: 'var(--text-secondary)' }}>\r\n          <div><span style={{ fontWeight: 600 }}>{t('lblPhoneShort')}:</span> {family.phone}</div>\r\n          <div><span style={{ fontWeight: 600 }}>{t('lblIncome')}:</span> EGP {family.income}</div>\r\n          <div><span style={{ fontWeight: 600 }}>{t('lblAge')}:</span> {calculateAge(family.nationalId) || '-'} {calculateAge(family.nationalId) ? t('years') : ''}</div>\r\n          <div><span style={{ fontWeight: 600 }}>{t('lblMembersCount')}:</span> {family.members?.length || 0}</div>\r\n          <div style={{ gridColumn: '1 / -1' }}><span style={{ fontWeight: 600 }}>{t('lblAddress')}:</span> {family.address}</div>\r\n          {family.job && <div><span style={{ fontWeight: 600 }}>{t('memberJob')}:</span> {family.job}</div>}\r\n          {family.socialStatus && <div><span style={{ fontWeight: 600 }}>{t('memberStatus')}:</span> {t('status' + family.socialStatus) || family.socialStatus}</div>}\r\n        </div>\r\n\r\n        {/* Aid History Table */}\r\n        <div>\r\n          <h4 style={{ fontSize: '1rem', margin: '0 0 0.5rem 0' }}>{t('btnAidHistory')}</h4>\r\n          {allAids.length > 0 ? (\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={{ width: '100%', fontSize: '0.9rem', borderCollapse: 'collapse' }}>\r\n                <thead>\r\n                  <tr style={{ background: '#f9fafb', borderBottom: '1px solid #e5e7eb' }}>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left' }}>{t('thDate')}</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left' }}>{t('thBeneficiary')}</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left' }}>{t('thType')}</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'left' }}>{t('thDesc')}</th>\r\n                    <th style={{ padding: '0.5rem', textAlign: 'right' }}>{t('thAmount')}</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {allAids.map((aid, idx) => (\r\n                    <tr key={aid.id || idx} style={{ borderBottom: '1px solid #f3f4f6' }}>\r\n                      <td style={{ padding: '0.5rem' }}>{new Date(aid.date).toLocaleDateString()}</td>\r\n                      <td style={{ padding: '0.5rem' }}>{aid.beneficiary}</td>\r\n                      <td style={{ padding: '0.5rem' }}>\r\n                        <span style={{\r\n                          fontSize: '0.75rem',\r\n                          padding: '0.1rem 0.4rem',\r\n                          borderRadius: '4px',\r\n                          background: aid.type === 'FAMILY' ? '#fdf2f8' : '#eff6ff',\r\n                          color: aid.type === 'FAMILY' ? '#be185d' : '#1d4ed8'\r\n                        }}>\r\n                          {t('type' + aid.type) || aid.type}\r\n                        </span>\r\n                      </td>\r\n                      <td style={{ padding: '0.5rem' }}>{aid.description}</td>\r\n                      <td style={{ padding: '0.5rem', textAlign: 'right', fontWeight: 600 }}>EGP {aid.amount}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <div style={{ padding: '0.5rem', fontSize: '0.9rem', color: 'var(--text-muted)', fontStyle: 'italic' }}>\r\n              {t('msgNoAidHistory')}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AidHistoryTable({ t }) {\r\n  const [history, setHistory] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [filterMonth, setFilterMonth] = useState('');\r\n  const [filterYear, setFilterYear] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const params = new URLSearchParams({\r\n      page,\r\n      limit: 10\r\n    });\r\n\r\n    // Use month/year filtering if set, otherwise use date range\r\n    if (filterMonth && filterYear) {\r\n      params.append('month', filterMonth);\r\n      params.append('year', filterYear);\r\n    } else {\r\n      if (startDate) params.append('startDate', startDate);\r\n      if (endDate) params.append('endDate', endDate);\r\n    }\r\n\r\n    fetch(`${API_URL}/api/aid?${params.toString()}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        if (result.data && Array.isArray(result.data)) {\r\n          setHistory(result.data);\r\n          setTotalPages(result.meta.totalPages);\r\n        } else {\r\n          // Fallback for old API if needed, though we updated it\r\n          setHistory(Array.isArray(result) ? result : []);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n        setHistory([]);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [page, startDate, endDate, filterMonth, filterYear]);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(t('confirmDelete') || 'Are you sure?')) return;\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/aid/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      if (res.ok) {\r\n        setHistory(history.filter(h => h.id !== id));\r\n      } else {\r\n        alert(t('aidFail') || 'Failed to delete');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(t('alertError'));\r\n    }\r\n  };\r\n\r\n  const exportHistory = async () => {\r\n    try {\r\n      const params = new URLSearchParams({ limit: 100000 }); // Fetch all\r\n      if (startDate) params.append('startDate', startDate);\r\n      if (endDate) params.append('endDate', endDate);\r\n\r\n      const res = await fetch(`${API_URL}/api/aid?${params.toString()}`, {\r\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      const result = await res.json();\r\n      const data = result.data || [];\r\n\r\n      const rows = data.map(item => ({\r\n        [t('thDate')]: new Date(item.date).toLocaleDateString(),\r\n        [t('thType')]: t('type' + item.type) || item.type,\r\n        [t('thBeneficiary')]: item.type === 'FAMILY'\r\n          ? item.family?.fullName\r\n          : `${item.member?.name || (item.family?.fullName || t('unknownFamily'))}${item.member?.name && item.family?.fullName ? ` (${item.family.fullName})` : ''}`,\r\n        [t('thDesc')]: item.description,\r\n        [t('thAmount')]: item.amount\r\n      }));\r\n\r\n      const ws = XLSX.utils.json_to_sheet(rows);\r\n      const wb = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(wb, ws, \"History\");\r\n      XLSX.writeFile(wb, \"AidHistory.xlsx\");\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(t('alertError'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem', flexWrap: 'wrap', gap: '1rem' }}>\r\n        <h3 style={{ margin: 0 }}>{t('btnAidHistory')}</h3>\r\n        <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', flexWrap: 'wrap' }}>\r\n          <button onClick={exportHistory} className=\"btn btn-secondary\" style={{ marginRight: '1rem' }}>\r\n            {t('btnExport')}\r\n          </button>\r\n\r\n          {/* Month/Year Filter for Recurring Aids */}\r\n          <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', padding: '0.5rem', background: 'var(--glass-bg)', borderRadius: '8px', border: '1px solid var(--border-color)' }}>\r\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n              <label style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginBottom: '0.25rem' }}>{t('lblMonth') || 'Month'}</label>\r\n              <select\r\n                className=\"form-input\"\r\n                style={{ padding: '0.25rem', fontSize: '0.9rem', minWidth: '100px' }}\r\n                value={filterMonth}\r\n                onChange={(e) => {\r\n                  setFilterMonth(e.target.value);\r\n                  setStartDate('');\r\n                  setEndDate('');\r\n                  setPage(1);\r\n                }}\r\n              >\r\n                <option value=\"\">{t('optAll') || 'All'}</option>\r\n                <option value=\"1\">{t('monthJan') || 'January'}</option>\r\n                <option value=\"2\">{t('monthFeb') || 'February'}</option>\r\n                <option value=\"3\">{t('monthMar') || 'March'}</option>\r\n                <option value=\"4\">{t('monthApr') || 'April'}</option>\r\n                <option value=\"5\">{t('monthMay') || 'May'}</option>\r\n                <option value=\"6\">{t('monthJun') || 'June'}</option>\r\n                <option value=\"7\">{t('monthJul') || 'July'}</option>\r\n                <option value=\"8\">{t('monthAug') || 'August'}</option>\r\n                <option value=\"9\">{t('monthSep') || 'September'}</option>\r\n                <option value=\"10\">{t('monthOct') || 'October'}</option>\r\n                <option value=\"11\">{t('monthNov') || 'November'}</option>\r\n                <option value=\"12\">{t('monthDec') || 'December'}</option>\r\n              </select>\r\n            </div>\r\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n              <label style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginBottom: '0.25rem' }}>{t('lblYear') || 'Year'}</label>\r\n              <select\r\n                className=\"form-input\"\r\n                style={{ padding: '0.25rem', fontSize: '0.9rem', minWidth: '80px' }}\r\n                value={filterYear}\r\n                onChange={(e) => {\r\n                  setFilterYear(e.target.value);\r\n                  setStartDate('');\r\n                  setEndDate('');\r\n                  setPage(1);\r\n                }}\r\n              >\r\n                <option value=\"\">{t('optAll') || 'All'}</option>\r\n                <option value=\"2024\">2024</option>\r\n                <option value=\"2025\">2025</option>\r\n                <option value=\"2026\">2026</option>\r\n                <option value=\"2027\">2027</option>\r\n                <option value=\"2028\">2028</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Date Range Filter */}\r\n          <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\r\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n              <label style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{t('lblFromDate')}</label>\r\n              <input\r\n                type=\"date\"\r\n                className=\"form-input\"\r\n                style={{ padding: '0.25rem', fontSize: '0.9rem' }}\r\n                value={startDate}\r\n                onChange={(e) => {\r\n                  setStartDate(e.target.value);\r\n                  setFilterMonth('');\r\n                  setFilterYear('');\r\n                  setPage(1);\r\n                }}\r\n              />\r\n            </div>\r\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n              <label style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>{t('lblToDate')}</label>\r\n              <input\r\n                type=\"date\"\r\n                className=\"form-input\"\r\n                style={{ padding: '0.25rem', fontSize: '0.9rem' }}\r\n                value={endDate}\r\n                onChange={(e) => {\r\n                  setEndDate(e.target.value);\r\n                  setFilterMonth('');\r\n                  setFilterYear('');\r\n                  setPage(1);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)' }}>{t('loading')}</div>\r\n      ) : (\r\n        <>\r\n          <table style={{ width: '100%', borderCollapse: 'collapse', textAlign: 'inherit' }}>\r\n            <thead>\r\n              <tr style={{ borderBottom: '2px solid #e5e7eb' }}>\r\n                <th style={{ padding: '1rem' }}>{t('thDate')}</th>\r\n                <th style={{ padding: '1rem' }}>{t('thType')}</th>\r\n                <th style={{ padding: '1rem' }}>{t('lblRecurrenceType') || 'Recurrence'}</th>\r\n                <th style={{ padding: '1rem' }}>{t('thBeneficiary')}</th>\r\n                <th style={{ padding: '1rem' }}>{t('thDesc')}</th>\r\n                <th style={{ padding: '1rem' }}>{t('thAmount')}</th>\r\n                <th style={{ padding: '1rem' }}>{t('actions') || 'Actions'}</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {history.map(item => (\r\n                <tr key={item.id} style={{ borderBottom: '1px solid #f3f4f6' }}>\r\n                  <td style={{ padding: '1rem' }}>{new Date(item.date).toLocaleDateString()}</td>\r\n                  <td style={{ padding: '1rem' }}>\r\n                    <span style={{\r\n                      padding: '0.25rem 0.5rem',\r\n                      borderRadius: '4px',\r\n                      background: item.type === 'FAMILY' ? '#fdf2f8' : '#eff6ff',\r\n                      color: item.type === 'FAMILY' ? '#be185d' : '#1d4ed8',\r\n                      fontSize: '0.85rem',\r\n                      fontWeight: 600\r\n                    }}>\r\n                      {t('type' + item.type) || item.type}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: '1rem' }}>\r\n                    <span style={{\r\n                      padding: '0.25rem 0.5rem',\r\n                      borderRadius: '4px',\r\n                      background: item.recurrenceType === 'MONTHLY' ? '#ecfdf5' : (item.recurrenceType === 'YEARLY' ? '#fef3c7' : '#f3f4f6'),\r\n                      color: item.recurrenceType === 'MONTHLY' ? '#047857' : (item.recurrenceType === 'YEARLY' ? '#d97706' : '#6b7280'),\r\n                      fontSize: '0.75rem',\r\n                      fontWeight: 600\r\n                    }}>\r\n                      {item.recurrenceType === 'MONTHLY' ? (t('recurrenceMonthly') || 'Monthly') : (item.recurrenceType === 'YEARLY' ? (t('recurrenceYearly') || 'Yearly') : (t('recurrenceCustom') || 'One-time'))}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: '1rem' }}>\r\n                    {item.type === 'FAMILY'\r\n                      ? item.family?.fullName\r\n                      : `${item.member?.name || (item.family?.fullName || t('unknownFamily'))}${item.member?.name && item.family?.fullName ? ` (${item.family.fullName})` : ''}`\r\n                    }\r\n                  </td>\r\n                  <td style={{ padding: '1rem' }}>{item.description}</td>\r\n                  <td style={{ padding: '1rem', fontWeight: 600 }}>EGP {item.amount}</td>\r\n                  <td style={{ padding: '1rem', display: 'flex', gap: '0.5rem' }}>\r\n                    <button\r\n                      onClick={() => navigate('/aid-management', { state: { aidToEdit: item } })}\r\n                      className=\"btn btn-secondary\"\r\n                      style={{ padding: '0.25rem 0.5rem', fontSize: '0.8rem' }}\r\n                      title={t('lblEdit')}\r\n                    >\r\n                      <Edit size={14} />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(item.id)}\r\n                      className=\"btn btn-secondary\"\r\n                      style={{ padding: '0.25rem 0.5rem', fontSize: '0.8rem', color: '#ef4444', borderColor: '#fee2e2', background: '#fef2f2' }}\r\n                      title={t('delete')}\r\n                    >\r\n                      <Trash2 size={14} />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {history.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"7\" style={{ padding: '2rem', textAlign: 'center', color: 'var(--text-muted)' }}>\r\n                    {t('noRecords')}\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n\r\n          {/* Pagination Controls */}\r\n          {totalPages > 1 && (\r\n            <div style={{ display: 'flex', justifyContent: 'center', gap: '1rem', marginTop: '1.5rem', alignItems: 'center' }}>\r\n              <button\r\n                className=\"btn btn-secondary\"\r\n                onClick={() => setPage(p => Math.max(1, p - 1))}\r\n                disabled={page === 1}\r\n              >\r\n                {t('btnPrev')}\r\n              </button>\r\n              <span style={{ color: 'var(--text-secondary)' }}>\r\n                {t('lblPage')} {page} / {totalPages}\r\n              </span>\r\n              <button\r\n                className=\"btn btn-secondary\"\r\n                onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n                disabled={page === totalPages}\r\n              >\r\n                {t('btnNext')}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}